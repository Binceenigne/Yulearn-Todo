import{_ as Me,A as Re,c as i,a as e,b as ne,d as ae,e as g,w as ie,n as r,f as d,F as x,g as C,h as re,v as ce,t as u,r as U,i as H,T as de,j as Ue,k as Le,u as Oe,l as Fe,m as Ne,o as c,p as Pe,q as Be,s as ve,x as j,y as Ee,C as ze,z as a}from"./index-C_3ZkprJ.js";const Ge="./svg/iconnull.svg",He={components:{AIConfigModal:Re},emits:["complete"],setup(L,{emit:l}){const X=Ee(),t=Oe(),q=Fe(),D=Ne(),p=c(0),s=c(!1),A=Pe(()=>{switch(p.value){case 0:return"welcome-intro";case 1:return"profile-step";case 2:return"privacy-step";case 3:return"ai-config-step";case 4:return"academic-step";case 5:return"theme-step";case 6:return"complete-step";default:return""}}),M=c(""),k=c(""),m=c(""),Y=c(null),V=c(null);let v=null;const h=c(!1),T=c([]),Z=c([]),_=c([]),Q=c([]),P=c([]),y=c(""),S=c(""),w=c(""),I=c(""),W=c(null),O=()=>{if(W.value){const o=W.value,n={top:o.scrollHeight,behavior:"smooth"};o.scrollTo(n)}},R=c(null);function ue(o){R.value===o?R.value=null:R.value=o}function fe(o,n){switch(o){case"faculty":y.value=n,E();break;case"grade":S.value=n,K();break;case"major":w.value=n,z();break;case"class":I.value=n;break}R.value=null}function me(o){if(!o)return{position:"absolute",top:"100%",left:"0",width:"100%"};const n=o.getBoundingClientRect(),f=window.innerHeight,b=200,G=f-n.bottom,oe=n.top;return G<b&&oe>G?{position:"absolute",bottom:"100%",left:"0",width:"100%",maxHeight:`${Math.min(oe-10,300)}px`,zIndex:1e3}:{position:"static",top:"100%",left:"0",width:"100%",maxHeight:`${Math.min(G-10,300)}px`,zIndex:1e3}}const F=c(""),B=c([]),N=c("default"),J=c(!1);function $(){if(p.value===1&&!M.value.trim()){alert("请输入您的昵称");return}p.value<6&&p.value++}function pe(){p.value>0&&p.value--}function ge(o){if(o>1&&p.value===1&&!M.value.trim()){alert("请先输入昵称");return}p.value=o}function ye(){if(!M.value.trim()){p.value=1,alert("请输入您的昵称");return}$()}function ke(){s.value=!0,we(),setTimeout(()=>{X.push("/tasks"),l("complete")},400)}function we(){const o=k.value||"",n={avatar:o,nickname:M.value.trim(),faculty:y.value,major:w.value,className:I.value,isInitialized:!0};try{o&&localStorage.setItem("__last_avatar",o)}catch(f){console.warn("无法将头像备份到localStorage:",f)}t.updateUserInfo(n),q.updateSettings({theme:N.value})}function be(){Y.value.click()}function Ce(o){try{const n=o.target.files[0];if(!n)return;if(!n.type.startsWith("image/")){alert("请选择图片文件!");return}if(n.size>20*1024*1024){alert("图片大小不能超过20MB!");return}const f=new FileReader;f.onload=function(b){window._originalImageData=b.target.result,m.value&&URL.revokeObjectURL(m.value),m.value=URL.createObjectURL(n),h.value=!0,j(()=>{he()})},f.onerror=function(){alert("文件读取失败，请重试")},f.readAsDataURL(n),o.target.value=""}catch(n){console.error("处理文件错误:",n),alert("图片处理失败，请重试"),m.value&&(URL.revokeObjectURL(m.value),m.value=""),h.value=!1}}function he(){try{if(!V.value){window._originalImageData&&(k.value=window._originalImageData,h.value=!1);return}v&&(v.destroy(),v=null),v=new ze(V.value,{aspectRatio:1,viewMode:2,dragMode:"move",autoCropArea:1,restore:!1,modal:!0,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1,minCropBoxWidth:100,minCropBoxHeight:100,background:!0})}catch(o){console.error("初始化裁剪器失败:",o),window._originalImageData&&(k.value=window._originalImageData),h.value=!1}}async function Se(){try{if(!v){if(window._originalImageData){k.value=window._originalImageData,h.value=!1;return}alert("裁剪失败，请重新上传图片");return}const o=v.getCroppedCanvas({width:400,height:400,fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"});if(!o)throw new Error("无法获取裁剪后的canvas");const n=o.toDataURL("image/jpeg",.85);if(!n||!n.startsWith("data:image/"))throw new Error("生成的base64数据无效");k.value=n}catch(o){console.error("裁剪确认失败:",o),window._originalImageData?k.value=window._originalImageData:alert("头像处理失败，请重试")}finally{if(m.value&&(URL.revokeObjectURL(m.value),m.value=""),v)try{v.destroy()}catch(o){console.error("清理裁剪器失败:",o)}finally{v=null}h.value=!1}}function Ie(){if(h.value=!1,m.value&&(URL.revokeObjectURL(m.value),m.value=""),v)try{v.destroy()}catch(o){console.error("清理裁剪器失败:",o)}finally{v=null}}function De(o){o&&o.stopPropagation(),k.value="",window._originalImageData&&delete window._originalImageData}async function Ae(){try{const o=await fetch("./data/all_timetables.json");if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);T.value=await o.json();const n=[...new Set(T.value.map(f=>f.院系))];Z.value=n}catch(o){console.error("加载课表数据失败:",o),T.value=[]}}function Te(){if(!F.value||F.value.length<2){B.value=[];return}const o=F.value.toLowerCase(),n=[];T.value.forEach(f=>{const b={faculty:f.院系,grade:f.年级,major:f.课表.专业,className:f.课表.班级};`${b.faculty}${b.grade}${b.major}${b.className}`.toLowerCase().includes(o)&&n.push(b)}),B.value=n.slice(0,10)}function xe(o){y.value=o.faculty,E(),j(()=>{S.value=o.grade,K(),j(()=>{w.value=o.major,z(),j(()=>{I.value=o.className,F.value="",B.value=[],O()})})})}function E(){if(S.value="",w.value="",I.value="",Q.value=[],P.value=[],!y.value)return;const o=[...new Set(T.value.filter(n=>n.院系===y.value).map(n=>n.年级))];_.value=o,j(()=>{O()})}function K(){if(w.value="",I.value="",P.value=[],!y.value||!S.value)return;const o=[...new Set(T.value.filter(n=>n.院系===y.value&&n.年级===S.value).map(n=>n.课表.专业))];Q.value=o,j(()=>{O()})}function z(){if(I.value="",!y.value||!S.value||!w.value)return;const o=[...new Set(T.value.filter(n=>n.院系===y.value&&n.年级===S.value&&n.课表.专业===w.value).map(n=>n.课表.班级))];P.value=o,j(()=>{O()})}function je(o){N.value=o,document.body.parentElement.dataset.theme=o}function ee(){J.value=!0}function le(){J.value=!1}function te(){return D.config.provider==="zhipuai"?"智谱AI":D.config.provider==="siliconflow"?"硅基流动":"未知"}function se(){return D.config.usePresetModel?D.config.model||"未选择":D.config.customModel||"未设置"}return Be(()=>{Ae(),t.nickname&&(M.value=t.nickname),t.avatar&&(k.value=t.avatar),t.faculty&&(y.value=t.faculty,E(),setTimeout(()=>{t.major&&(w.value=t.major,z()),t.className&&(I.value=t.className)},500)),N.value=q.theme||"default",document.body.parentElement.dataset.theme=N.value;const o=n=>{n.target.closest(".custom-select")||(R.value=null)};document.addEventListener("click",o),ve(()=>{if(document.removeEventListener("click",o),v)try{v.destroy()}catch(n){console.error("裁剪器清理失败:",n)}finally{v=null}})}),ve(()=>{if(v)try{v.destroy()}catch(o){console.error("裁剪器清理失败:",o)}finally{v=null}}),{currentStep:p,isAnimatingOut:s,nickname:M,avatarPreview:k,fileInput:Y,cropperImage:V,isCropping:h,tempImageUrl:m,faculties:Z,grades:_,majors:Q,classes:P,selectedFaculty:y,selectedGrade:S,selectedMajor:w,selectedClass:I,scrollContainer:W,searchQuery:F,searchResults:B,selectedTheme:N,aiStore:D,showAIConfigModal:J,openAIConfigModal:ee,closeAIConfigModal:le,getProviderDisplayName:te,getCurrentModelName:se,nextStep:$,prevStep:pe,goToStep:ge,completeSetup:ye,finishAndEnter:ke,triggerFileInput:be,handleFileChange:Ce,confirmCrop:Se,cancelCropping:Ie,deleteAvatar:De,onSearch:Te,selectSearchResult:xe,onFacultyChange:E,onGradeChange:K,onMajorChange:z,selectTheme:je,scrollToBottom:O,getStepClasses:A,openAIConfigModal:ee,closeAIConfigModal:le,getProviderDisplayName:te,getCurrentModelName:se,openDropdown:R,toggleDropdown:ue,selectOption:fe,getDropdownPosition:me}}},qe={class:"welcome-content"},Ve={key:0,class:"welcome-intro"},Qe={key:1,class:"profile-step"},We={class:"profile-avatar"},Je=["src"],Ke={class:"avatar-actions"},Xe={key:1,class:"avatar-placeholder"},Ye={key:1,class:"cropper-container"},Ze={class:"cropper-wrapper"},_e=["src"],$e={class:"cropper-actions"},el={class:"form-group"},ll={class:"welcome-actions"},tl=["disabled"],sl={key:2,class:"privacy-step"},ol={class:"welcome-actions"},nl={key:3,class:"ai-config-step"},al={class:"ai-config-container"},il={class:"ai-status-panel"},rl={class:"ai-status-header"},cl={key:0,class:"ai-current-config"},dl={class:"config-item"},vl={class:"value"},ul={class:"config-item"},fl={class:"value"},ml={class:"welcome-actions"},pl={key:4,class:"academic-step"},gl={class:"form-group search-box"},yl={class:"search-input-container"},kl={key:0,class:"search-results"},wl=["onClick"],bl={class:"result-main"},Cl={class:"result-detail"},hl={class:"result-detail"},Sl={class:"inside-scroll-container",ref:"scrollContainer"},Il={class:"form-group"},Dl={class:"select-display"},Al={key:0},Tl={key:1,class:"placeholder"},xl=["onClick"],jl={key:0,class:"form-group"},Ml={class:"select-display"},Rl={key:0},Ul={key:1,class:"placeholder"},Ll=["onClick"],Ol={key:1,class:"form-group"},Fl={class:"select-display"},Nl={key:0},Pl={key:1,class:"placeholder"},Bl=["onClick"],El={key:2,class:"form-group"},zl={class:"select-display"},Gl={key:0},Hl={key:1,class:"placeholder"},ql=["onClick"],Vl={class:"welcome-actions"},Ql={key:5,class:"theme-step"},Wl={class:"theme-selector"},Jl={class:"theme-container"},Kl={class:"theme-container"},Xl={class:"welcome-actions"},Yl={key:6,class:"complete-step"},Zl={key:0,class:"step-dots"},_l=["onClick"];function $l(L,l,X,t,q,D){const p=Ue("AIConfigModal");return a(),i("div",{class:r(["welcome-container",{"animate-out":t.isAnimatingOut}])},[l[84]||(l[84]=e("div",{class:"welcome-bg"},[e("div",{class:"bg-pattern"}),e("div",{class:"bg-gradient"})],-1)),e("div",qe,[ae(de,{name:"slide-fade",mode:"out-in"},{default:ie(()=>[(a(),i("div",{key:t.currentStep,class:r(["welcome-step",t.getStepClasses])},[t.currentStep===0?(a(),i("div",Ve,[l[39]||(l[39]=e("div",{class:"logo-container"},[e("img",{src:Ge,class:"logo",alt:"Logo"})],-1)),l[40]||(l[40]=e("h1",{class:"welcome-title"},[d("欢迎使用 "),e("br"),d(),e("span",{style:{color:"var(--primary-color)","font-size":"larger"}},"鱼跃Todo")],-1)),l[41]||(l[41]=e("p",{class:"welcome-description"},"您的个人学习与时间管理助手",-1)),e("button",{class:"btn btn-primary btn-lg",onClick:l[0]||(l[0]=(...s)=>t.nextStep&&t.nextStep(...s))},"继续")])):t.currentStep===1?(a(),i("div",Qe,[l[45]||(l[45]=e("h2",{class:"step-title"},"基本资料",-1)),l[46]||(l[46]=e("p",{class:"step-description"},"让我们先了解一些基本信息",-1)),e("div",We,[t.isCropping?(a(),i("div",Ye,[e("div",Ze,[e("img",{ref:"cropperImage",src:t.tempImageUrl,alt:"待裁剪的图片",style:{"max-width":"100%"}},null,8,_e)]),e("div",$e,[e("button",{class:"btn btn-outline",onClick:l[3]||(l[3]=(...s)=>t.cancelCropping&&t.cancelCropping(...s))},"取消"),e("button",{class:"btn btn-primary",onClick:l[4]||(l[4]=(...s)=>t.confirmCrop&&t.confirmCrop(...s))},"确定")])])):(a(),i("div",{key:0,class:"avatar-preview",onClick:l[2]||(l[2]=(...s)=>t.triggerFileInput&&t.triggerFileInput(...s))},[t.avatarPreview?(a(),i(x,{key:0},[e("img",{src:t.avatarPreview,alt:"头像预览",class:"avatar-image"},null,8,Je),e("div",Ke,[e("button",{class:"avatar-action-btn",onClick:l[1]||(l[1]=C((...s)=>t.deleteAvatar&&t.deleteAvatar(...s),["stop"]))},l[42]||(l[42]=[e("i",{class:"fas fa-trash"},null,-1)]))])],64)):(a(),i("div",Xe,l[43]||(l[43]=[e("i",{class:"fas fa-user"},null,-1),e("span",null,"点击添加头像",-1)])))]))]),e("div",el,[l[44]||(l[44]=e("label",{for:"nickname"},"昵称",-1)),re(e("input",{id:"nickname",type:"text","onUpdate:modelValue":l[5]||(l[5]=s=>t.nickname=s),placeholder:"请输入您的昵称",class:"form-control"},null,512),[[ce,t.nickname]])]),e("div",ll,[e("button",{class:"btn btn-outline",onClick:l[6]||(l[6]=(...s)=>t.prevStep&&t.prevStep(...s))},"返回"),e("button",{class:"btn btn-primary",onClick:l[7]||(l[7]=(...s)=>t.nextStep&&t.nextStep(...s)),disabled:!t.nickname.trim()},"继续",8,tl)]),e("input",{type:"file",ref:"fileInput",style:{display:"none"},accept:"image/*",onChange:l[8]||(l[8]=(...s)=>t.handleFileChange&&t.handleFileChange(...s))},null,544)])):t.currentStep===2?(a(),i("div",sl,[l[47]||(l[47]=e("h2",{class:"step-title"},"隐私说明",-1)),l[48]||(l[48]=e("p",{class:"step-description"},"我们非常重视您的隐私和数据安全，请仔细阅读以下内容：",-1)),l[49]||(l[49]=e("div",{class:"privacy-content-card"},[e("div",{class:"privacy-header"},[e("h3",null,"鱼跃Todo-隐私政策和服务条款")]),e("div",{class:"privacy-sections"},[e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-server"}),d(" AI服务提供商")]),e("ul",null,[e("li",null,[e("strong",null,"智谱AI"),d(" - 提供GLM系列语言模型的智能任务拆解与建议功能")]),e("li",null,[e("strong",null,"硅基流动"),d(" - 提供多种开源AI模型API接口，用于自然语言处理与分析")])])]),e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-database"}),d(" 本地数据存储策略")]),e("ul",null,[e("li",null,"所有核心数据（任务、统计、设置、积分、用户信息）均保存在设备本地"),e("li",null,"数据结构经过版本控制，支持向后兼容和升级"),e("li",null,"如果不使用AI功能，您的数据不会上传至我们的服务器或第三方服务器")])]),e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-exchange-alt"}),d(" 数据共享说明")]),e("ul",null,[e("li",null,[d("当您启用AI功能时，您的"),e("strong",null,"任务内容"),d("与"),e("strong",null,"课表内容"),d("可能会发送至AI服务商服务器以获取建议")]),e("li",null,"所有数据仅用于实现如智能拆解、时间预测等AI功能，绝不用于广告或销售用途"),e("li",null,[d("您的"),e("strong",null,"API密钥"),d("等敏感信息将始终保存在本地，不会被上传或共享")])])]),e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-user-shield"}),d(" 您的权利")]),e("ul",null,[e("li",null,"您可以在设置中随时启用或停用AI相关功能"),e("li",null,"即使未启用AI功能，应用的基本计时与任务功能也可正常使用"),e("li",null,"您可选择删除或重置本地存储的所有用户数据与配置项"),e("li",null,"我们不会收集或存储任何可用于识别您身份的个人信息")])]),e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-cogs"}),d(" 安全与可控性")]),e("ul",null,[e("li",null,"应用设计遵循“隐私优先”原则，数据使用最小化"),e("li",null,"所有本地数据操作具有回退与重置机制，确保数据完整性"),e("li",null,"本地AI模块将在未来支持离线智能功能，进一步提升隐私保障")])]),e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-exclamation-triangle"}),d(" 免责声明")]),e("ul",null,[e("li",null,"本应用为独立开发者项目，已尽最大努力确保数据安全与隐私合规，但不对因第三方服务商造成的意外数据泄露承担法律责任"),e("li",null,"您在使用AI功能时，即默认同意您的输入数据可能被用于生成智能建议，该过程依赖外部服务商处理"),e("li",null,"对于因设备系统、浏览器限制或用户误操作导致的数据丢失，开发者不承担责任")])]),e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-bell"}),d(" 数据收集变更通知")]),e("ul",null,[e("li",null,"我们承诺，在未来如需添加任何新的数据收集或上传功能，将在应用内显著位置提示，并征得您的明确同意后方可启用"),e("li",null,"您将始终拥有选择权，可拒绝参与任何扩展性数据使用而不影响基础功能使用")])]),e("div",{class:"privacy-section"},[e("h4",null,[e("i",{class:"fas fa-calendar-check"}),d(" 隐私政策更新时间")]),e("p",null,[d("本隐私政策最后更新日期："),e("br"),e("strong",null,"2025年5月28日")])])])],-1)),l[50]||(l[50]=e("div",{class:"privacy-agreement"},[e("div",{class:"agreement-box"},[e("i",{class:"fas fa-info-circle"}),e("span",null,"继续使用表示您已阅读并同意上述隐私政策和服务条款")])],-1)),e("div",ol,[e("button",{class:"btn btn-outline",onClick:l[9]||(l[9]=(...s)=>t.prevStep&&t.prevStep(...s))},"返回"),e("button",{class:"btn btn-primary",onClick:l[10]||(l[10]=(...s)=>t.nextStep&&t.nextStep(...s))},"继续")])])):t.currentStep===3?(a(),i("div",nl,[l[57]||(l[57]=e("h2",{class:"step-title"},"AI 智能助手",-1)),l[58]||(l[58]=e("p",{class:"step-description"},"配置 AI 服务以使用智能助手功能",-1)),e("div",al,[l[55]||(l[55]=e("div",{class:"ai-feature-intro"},[e("div",{class:"ai-feature-text"},[e("strong",null,"智能任务分解："),d("只需输入一句话，AI会自动帮您拆解成多个可执行的任务，提升效率。"),e("br"),e("strong",null,"AI主题生成："),d("根据您的个人喜好，AI可为您生成专属的主题配色，让界面更符合您的风格。 ")])],-1)),e("div",il,[e("div",rl,[l[51]||(l[51]=e("div",{class:"status-title"},"AI 服务状态",-1)),e("div",{class:r(["status-badge",{configured:t.aiStore.isConfigured,unconfigured:!t.aiStore.isConfigured}])},u(t.aiStore.isConfigured?"已配置":"未配置"),3)]),t.aiStore.isConfigured?(a(),i("div",cl,[e("div",dl,[l[52]||(l[52]=e("span",{class:"label"},"服务商:",-1)),e("span",vl,u(t.getProviderDisplayName()),1)]),e("div",ul,[l[53]||(l[53]=e("span",{class:"label"},"模型:",-1)),e("span",fl,u(t.getCurrentModelName()),1)])])):g("",!0),e("button",{onClick:l[11]||(l[11]=(...s)=>t.openAIConfigModal&&t.openAIConfigModal(...s)),class:"btn btn-config"},[l[54]||(l[54]=e("i",{class:"fas fa-cog"},null,-1)),d(" "+u(t.aiStore.isConfigured?"修改配置":"开始配置"),1)])]),l[56]||(l[56]=e("div",{class:"info-message"},[e("i",{class:"fas fa-info-circle"}),e("span",null,"不配置AI也可以使用基本功能，但无法使用智能规划相关功能")],-1))]),e("div",ml,[e("button",{class:"btn btn-outline",onClick:l[12]||(l[12]=(...s)=>t.prevStep&&t.prevStep(...s))},"返回"),e("button",{class:"btn btn-primary",onClick:l[13]||(l[13]=(...s)=>t.nextStep&&t.nextStep(...s))},"继续")])])):t.currentStep===4?(a(),i("div",pl,[l[65]||(l[65]=e("h2",{class:"step-title"},"院系信息",-1)),l[66]||(l[66]=e("p",{class:"step-description"},"选择您的院系信息以使用课表相关功能",-1)),e("div",gl,[l[60]||(l[60]=e("label",{for:"search"},"搜索班级",-1)),e("div",yl,[l[59]||(l[59]=e("i",{class:"search-icon fas fa-search"},null,-1)),re(e("input",{id:"search",type:"text","onUpdate:modelValue":l[14]||(l[14]=s=>t.searchQuery=s),placeholder:"直接输入班级名称",onInput:l[15]||(l[15]=(...s)=>t.onSearch&&t.onSearch(...s)),class:"form-control"},null,544),[[ce,t.searchQuery]])]),t.searchResults.length>0?(a(),i("div",kl,[(a(!0),i(x,null,U(t.searchResults,s=>(a(),i("div",{key:s.className,class:"search-result-item",onClick:A=>t.selectSearchResult(s)},[e("div",bl,u(s.className),1),e("div",Cl,u(s.faculty)+" - "+u(s.grade)+"级",1),e("div",hl,u(s.major),1)],8,wl))),128))])):g("",!0)]),e("div",Sl,[e("div",Il,[l[61]||(l[61]=e("label",{for:"faculty"},"院系",-1)),e("div",{class:r(["custom-select",{active:t.openDropdown==="faculty"}]),ref:"facultySelect",onClick:l[17]||(l[17]=s=>t.toggleDropdown("faculty"))},[e("div",Dl,[t.selectedFaculty?(a(),i("span",Al,u(t.selectedFaculty),1)):(a(),i("span",Tl,"请选择院系")),e("i",{class:r(["fas fa-chevron-down select-arrow",{rotate:t.openDropdown==="faculty"}])},null,2)]),t.openDropdown==="faculty"?(a(),i("div",{key:0,class:"select-options",style:H(t.getDropdownPosition(L.$refs.facultySelect))},[e("div",{class:r(["select-option",{selected:t.selectedFaculty===""}]),onClick:l[16]||(l[16]=C(s=>t.selectOption("faculty",""),["stop"]))}," 请选择院系 ",2),(a(!0),i(x,null,U(t.faculties,s=>(a(),i("div",{key:s,class:r(["select-option",{selected:t.selectedFaculty===s}]),onClick:C(A=>t.selectOption("faculty",s),["stop"])},u(s),11,xl))),128))],4)):g("",!0)],2)]),t.selectedFaculty?(a(),i("div",jl,[l[62]||(l[62]=e("label",{for:"grade"},"年级",-1)),e("div",{class:r(["custom-select",{active:t.openDropdown==="grade"}]),ref:"gradeSelect",onClick:l[19]||(l[19]=s=>t.toggleDropdown("grade"))},[e("div",Ml,[t.selectedGrade?(a(),i("span",Rl,u(t.selectedGrade),1)):(a(),i("span",Ul,"请选择年级")),e("i",{class:r(["fas fa-chevron-down select-arrow",{rotate:t.openDropdown==="grade"}])},null,2)]),t.openDropdown==="grade"?(a(),i("div",{key:0,class:"select-options",style:H(t.getDropdownPosition(L.$refs.gradeSelect))},[e("div",{class:r(["select-option",{selected:t.selectedGrade===""}]),onClick:l[18]||(l[18]=C(s=>t.selectOption("grade",""),["stop"]))}," 请选择年级 ",2),(a(!0),i(x,null,U(t.grades,s=>(a(),i("div",{key:s,class:r(["select-option",{selected:t.selectedGrade===s}]),onClick:C(A=>t.selectOption("grade",s),["stop"])},u(s),11,Ll))),128))],4)):g("",!0)],2)])):g("",!0),t.selectedGrade?(a(),i("div",Ol,[l[63]||(l[63]=e("label",{for:"major"},"专业",-1)),e("div",{class:r(["custom-select",{active:t.openDropdown==="major"}]),ref:"majorSelect",onClick:l[21]||(l[21]=s=>t.toggleDropdown("major"))},[e("div",Fl,[t.selectedMajor?(a(),i("span",Nl,u(t.selectedMajor),1)):(a(),i("span",Pl,"请选择专业")),e("i",{class:r(["fas fa-chevron-down select-arrow",{rotate:t.openDropdown==="major"}])},null,2)]),t.openDropdown==="major"?(a(),i("div",{key:0,class:"select-options",style:H(t.getDropdownPosition(L.$refs.majorSelect))},[e("div",{class:r(["select-option",{selected:t.selectedMajor===""}]),onClick:l[20]||(l[20]=C(s=>t.selectOption("major",""),["stop"]))}," 请选择专业 ",2),(a(!0),i(x,null,U(t.majors,s=>(a(),i("div",{key:s,class:r(["select-option",{selected:t.selectedMajor===s}]),onClick:C(A=>t.selectOption("major",s),["stop"])},u(s),11,Bl))),128))],4)):g("",!0)],2)])):g("",!0),t.selectedMajor?(a(),i("div",El,[l[64]||(l[64]=e("label",{for:"class"},"班级",-1)),e("div",{class:r(["custom-select",{active:t.openDropdown==="class"}]),ref:"classSelect",onClick:l[23]||(l[23]=s=>t.toggleDropdown("class"))},[e("div",zl,[t.selectedClass?(a(),i("span",Gl,u(t.selectedClass),1)):(a(),i("span",Hl,"请选择班级")),e("i",{class:r(["fas fa-chevron-down select-arrow",{rotate:t.openDropdown==="class"}])},null,2)]),t.openDropdown==="class"?(a(),i("div",{key:0,class:"select-options",style:H(t.getDropdownPosition(L.$refs.classSelect))},[e("div",{class:r(["select-option",{selected:t.selectedClass===""}]),onClick:l[22]||(l[22]=C(s=>t.selectOption("class",""),["stop"]))}," 请选择班级 ",2),(a(!0),i(x,null,U(t.classes,s=>(a(),i("div",{key:s,class:r(["select-option",{selected:t.selectedClass===s}]),onClick:C(A=>t.selectOption("class",s),["stop"])},u(s),11,ql))),128))],4)):g("",!0)],2)])):g("",!0)],512),l[67]||(l[67]=e("div",{class:"info-message"},[e("i",{class:"fas fa-info-circle"}),e("span",null,"不选择院系信息也可以使用基本功能，但无法使用课表相关功能")],-1)),e("div",Vl,[e("button",{class:"btn btn-outline",onClick:l[24]||(l[24]=(...s)=>t.prevStep&&t.prevStep(...s))},"返回"),e("button",{class:"btn btn-primary",onClick:l[25]||(l[25]=(...s)=>t.nextStep&&t.nextStep(...s))},"继续")])])):t.currentStep===5?(a(),i("div",Ql,[l[78]||(l[78]=e("h2",{class:"step-title"},"主题配色",-1)),l[79]||(l[79]=e("p",{class:"step-description"},"选择一个你喜欢的主题风格",-1)),l[80]||(l[80]=e("div",{class:"theme-preview"},[e("div",{class:"preview-card"},[e("div",{class:"preview-header"},"预览效果"),e("div",{class:"preview-content"},[e("div",{class:"preview-item"},[e("span",{class:"preview-label"},"主色调"),e("span",{class:"preview-color primary-color"})]),e("div",{class:"preview-item"},[e("span",{class:"preview-label"},"背景色"),e("span",{class:"preview-color bg-color"})]),e("div",{class:"preview-item"},[e("span",{class:"preview-label"},"卡片色"),e("span",{class:"preview-color card-color"})])])])],-1)),e("div",Wl,[e("div",Jl,[e("div",{class:r(["theme-option",{active:t.selectedTheme==="default"}]),onClick:l[26]||(l[26]=s=>t.selectTheme("default"))},l[68]||(l[68]=[e("div",{class:"theme-color",style:{"background-color":"#dddddd"}},null,-1),e("div",{class:"theme-name"},"白昼",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="pink"}]),onClick:l[27]||(l[27]=s=>t.selectTheme("pink"))},l[69]||(l[69]=[e("div",{class:"theme-color",style:{"background-color":"#ffb7c5"}},null,-1),e("div",{class:"theme-name"},"桃夭",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="spring"}]),onClick:l[28]||(l[28]=s=>t.selectTheme("spring"))},l[70]||(l[70]=[e("div",{class:"theme-color",style:{"background-color":"#c4f5ba"}},null,-1),e("div",{class:"theme-name"},"复苏",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="skyblue"}]),onClick:l[29]||(l[29]=s=>t.selectTheme("skyblue"))},l[71]||(l[71]=[e("div",{class:"theme-color",style:{"background-color":"#87ceeb"}},null,-1),e("div",{class:"theme-name"},"停云",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="city"}]),onClick:l[30]||(l[30]=s=>t.selectTheme("city"))},l[72]||(l[72]=[e("div",{class:"theme-color",style:{"background-color":"#778899"}},null,-1),e("div",{class:"theme-name"},"薄雾",-1)]),2)]),e("div",Kl,[e("div",{class:r(["theme-option",{active:t.selectedTheme==="rainynight"}]),onClick:l[31]||(l[31]=s=>t.selectTheme("rainynight"))},l[73]||(l[73]=[e("div",{class:"theme-color",style:{"background-color":"#282a36"}},null,-1),e("div",{class:"theme-name"},"​​夜霖",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="galaxy"}]),onClick:l[32]||(l[32]=s=>t.selectTheme("galaxy"))},l[74]||(l[74]=[e("div",{class:"theme-color",style:{"background-color":"#283593"}},null,-1),e("div",{class:"theme-name"},"银河",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="moonlight"}]),onClick:l[33]||(l[33]=s=>t.selectTheme("moonlight"))},l[75]||(l[75]=[e("div",{class:"theme-color",style:{"background-color":"#82b1ff"}},null,-1),e("div",{class:"theme-name"},"月光",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="furnace"}]),onClick:l[34]||(l[34]=s=>t.selectTheme("furnace"))},l[76]||(l[76]=[e("div",{class:"theme-color",style:{"background-color":"#ffaf65"}},null,-1),e("div",{class:"theme-name"},"火炉",-1)]),2),e("div",{class:r(["theme-option",{active:t.selectedTheme==="forest"}]),onClick:l[35]||(l[35]=s=>t.selectTheme("forest"))},l[77]||(l[77]=[e("div",{class:"theme-color",style:{"background-color":"#2e4433"}},null,-1),e("div",{class:"theme-name"},"苔醒",-1)]),2)])]),e("div",Xl,[e("button",{class:"btn btn-outline",onClick:l[36]||(l[36]=(...s)=>t.prevStep&&t.prevStep(...s))},"返回"),e("button",{class:"btn btn-primary",onClick:l[37]||(l[37]=(...s)=>t.nextStep&&t.nextStep(...s))},"继续")])])):t.currentStep===6?(a(),i("div",Yl,[l[81]||(l[81]=e("div",{class:"complete-animation"},[e("i",{class:"fas fa-check-circle"})],-1)),l[82]||(l[82]=e("h2",{class:"step-title"},"设置完成！",-1)),l[83]||(l[83]=e("p",{class:"step-description"},"现在您可以开始使用 鱼跃Todo 了",-1)),e("button",{class:"btn btn-primary btn-lg",onClick:l[38]||(l[38]=(...s)=>t.finishAndEnter&&t.finishAndEnter(...s))},"开始使用")])):g("",!0)],2))]),_:1}),t.currentStep>0&&t.currentStep<7?(a(),i("div",Zl,[(a(),i(x,null,U(7,s=>e("div",{key:s-1,class:r(["step-dot",{active:t.currentStep===s-1}]),onClick:A=>t.goToStep(s-1)},null,10,_l)),64))])):g("",!0)]),(a(),ne(Le,{to:"body"},[ae(de,{name:"modal"},{default:ie(()=>[t.showAIConfigModal?(a(),ne(p,{key:0,onClose:t.closeAIConfigModal},null,8,["onClose"])):g("",!0)]),_:1})]))],2)}const lt=Me(He,[["render",$l],["__scopeId","data-v-ed2bf22c"]]);export{lt as default};
